# ===========================
# âœ… Netlify æ„å»ºé…ç½®æ–‡ä»¶
# ===========================

[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  NEXT_TELEMETRY_DISABLED = "1"
  # å¼ºåˆ¶å…³é—­ Turbopackï¼ˆNext.js 15 é»˜è®¤å¼€å¯ï¼‰
  NEXT_DISABLE_TURBOPACK = "1"
  # é¿å…æ—§ç¼“å­˜å¯¼è‡´ snapshot é”™è¯¯
  NETLIFY_USE_YARN_CACHE = "false"
  # æŒ‡å®š React æ„å»ºç¯å¢ƒ
  NODE_ENV = "production"

# ===========================
# âœ… ä¿®å¤ Turbopack/SWC æ„å»ºé—®é¢˜
# ===========================
[build.processing]
  skip_processing = true

# ===========================
# âœ… é€šè¿‡ Edge Functions ç¦ç”¨ experimental runtime
# ===========================
[[plugins]]
  package = "@netlify/plugin-nextjs"

  [plugins.inputs]
    # æ˜ç¡®ä½¿ç”¨ webpack è€Œä¸æ˜¯ Turbopack
    disableTurbopack = true
    # ç¦ç”¨ Edge Runtimeï¼Œä»¥é˜² snapshot å†²çª
    edge_functions = false

# ===========================
# âœ… æ„å»ºåè¡Œä¸ºï¼ˆå¯é€‰ï¼‰
# ===========================
[build.lifecycle]
  onBuild = "echo 'âœ… æ„å»ºå¼€å§‹...'"
  onSuccess = "echo 'ğŸ‰ æ„å»ºæˆåŠŸï¼Œæ—  snapshot æŠ¥é”™!'"
  onError = "echo 'ğŸ’¥ æ„å»ºå¤±è´¥ï¼Œæ£€æŸ¥ Next.js ä¸ React ç‰ˆæœ¬!'"
